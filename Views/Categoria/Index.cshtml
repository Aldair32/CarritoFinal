@model IEnumerable<CarritoFinal.Models.Categoria >
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" />
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" />
<script src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.dataTables.min.css" />



<ol class="breadcrumb mb-4 mt-4">
    <li class="breadcrumb-item"><a href="index.html">Mantenimiento</a></li>
    <li class="breadcrumb-item active">Categorias</li>
</ol>

<div class="card">
    <div class="card-header">
        <i class="fas fa-users me-1"></i> Lista de Categorias
    </div>
    <div class="row align-items-end">
        <div class="card-body">
             <div class="row">
            <div class="col-12">
                <!--Toma el total de columnas de 12-->
                <button type="button" class="btn btn-info"><a asp-action="Nuevo">Crear Nuevo</a></button>
            </div>
            
        </div>
           

            @*<div class="col-sm-2">
                <div class="mb-2">
                    <label asp-for="FechaInicio" class="form-label" id="txtfechainicio">Fecha de Inicio:</label>
                    <input asp-for="FechaInicio" class="form-control" type="date" id="txtfechainicio" />
                </div>
            </div>
            <div class="col-sm-2">
                <div class="mb-2">
                    <label asp-for="FechaFin" class="form-label" id="txtfechafin">Fecha Fin:</label>
                    <input asp-for="FechaFin" class="form-control" type="date" id="txtfechafin" />
                </div>
            </div>*@
    </div>
        <table id="tabla" class="display cell-border display responsive nowrap" style=" width:100%">
            <thead>
                <tr>
                    <th>Codigo Categoria </th>
                    <th>Descripción </th>
                    <th>Fecha de Registro </th>
                    <th>Estado</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.CdCategoria</td>
                        <td>@item.Descripcion</td>
                        <td>@item.FechaRegistro </td>
                        <td class="text-center">
                            @if (item.Activo.HasValue && item.Activo.Value)
                            {
                                <span><span class="badge bg-success">Activo</span></span>
                            }
                            else
                            {
                                <span><span class="badge bg-danger">Inactivo</span></span>
                            }
                        </td>
                        <td data-orderable="false" data-searchable="false" style="width: 90px;">

                            <a asp-action="Eliminar" asp-route-id="@item.CdCategoria"> <button type="button" class="btn btn-danger btn-sm ms-2"><i class="fas fa-trash me-1"></i> </button> </a>



                            <a asp-action="Editar" asp-route-id="@item.CdCategoria"><button type="button" class="btn btn-primary btn-sm btn-editar"> <i class="fas fa-pen me-1"></i></button></a>

                        </td>
                    </tr>
                }


            </tbody>
        </table>
    </div>
</div>

@section scripts{
    <script>

        let table = new DataTable('#tabla', {
            language: {
                url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json',
                responsive: true,
            },
        });

        //$('#txtfechainicio, #txtfechafin').on('change', function () {
        //    var fechaInicio = $('#txtfechainicio').val();
        //    var fechaFin = $('#txtfechafin').val();
        //    table.destroy();
        //    table = $('#tabla').DataTable({
        //        language: {
        //            url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json',
        //            responsive: true,
        //        },
        //    });
        //});
         $(document).ready(function() {
            $('#btnFiltrar').click(function() {
                var fechaInicio = $('#fechaInicio').val();
                var fechaFin = $('#fechaFin').val();

                window.location.href = '/Categoria/Index?fechaInicio=' + fechaInicio + '&fechaFin=' + fechaFin;
            });
        });

    </script>
}